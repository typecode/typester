<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/Flyout.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/Flyout.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// jshint strict: false
import Module from '../core/Module';
import DOM from '../utils/DOM';

import flyoutTemplate from '../../templates/flyout.html';
import flyoutStyles from '../../styles/flyout.scss';

/**
* @access protected
*/
const Flyout = Module({
    name: 'Flyout',
    dom: {},
    props: {
        minZIndex: 90,
        styles: null,
        flyouts: []
    },
    handlers: {
        requests: {
            'flyout:new' : 'newFlyout'
        },
        commands: {},
        events: {
            'app:destroy' : 'destroy'
        }
    },
    methods: {
        setup () {
            this.appendStyles();
        },

        init () {},

        appendStyles () {
            const { props } = this;
            props.styles = DOM.addStyles(flyoutStyles);
        },

        newFlyout () {
            const { props } = this;
            const flyout = this.buildFlyout();
            props.flyouts.push(flyout);
            return flyout;
        },

        buildFlyout () {
            const flyout = {
                el: this.buildTemplate(),
                appended: null
            };

            flyout.contentEl = flyout.el.querySelector('.typester-flyout-content');

            flyout.clearContent = () => {
                flyout.contentEl.innerHTML = '';
            };

            flyout.appendContent = (content) => {
                return DOM.appendTo(flyout.contentEl, content);
            };
            flyout.show = () => {
                this.showFlyout(flyout);
            };
            flyout.remove = () => {
                this.removeFlyout(flyout);
            };
            flyout.hide = () => {
                this.hideFlyout(flyout);
            };
            flyout.position = (coordinates) => {
                this.positionFlyout(flyout, coordinates);
            };
            flyout.setPlacement = (placement) => {
                this.setPlacement(flyout, placement);
            };

            return flyout;
        },

        buildTemplate () {
            const wrapperEl = document.createElement('div');
            let flyoutHTML, flyoutEl;

            flyoutHTML = flyoutTemplate();
            if (typeof flyoutHTML === 'string') {
                wrapperEl.innerHTML = flyoutHTML;
            } else {
                wrapperEl.appendChild(flyoutHTML[0]);
            }
            flyoutEl = wrapperEl.childNodes[0];

            return flyoutEl;
        },

        appendFlyout (flyout) {
            DOM.appendTo(document.body, flyout.el);
        },

        removeFlyout (flyout) {
            if (flyout.appended) {
                DOM.removeNode(flyout.el);
                flyout.appended = false;
            }
        },

        positionFlyout (flyout, coordinates) {
            const { mediator, props } = this;
            const contentEditableEl = mediator.get('contenteditable:element');
            const containerZIndex = Math.max(props.minZIndex, DOM.getContainerZIndex(contentEditableEl));
            console.log('positionFlyout', coordinates);
            Object.keys(coordinates).forEach((coordinateKey) => {
                flyout.el.style[coordinateKey] = coordinates[coordinateKey];
            });

            flyout.el.style.zIndex = containerZIndex + 1;
        },

        setPlacement (flyout, placement='above') {
            flyout.el.classList.remove('place-below');
            flyout.el.classList.remove('place-above');
            flyout.el.classList.add(`place-${placement}`);
        },

        showFlyout (flyout) {
            if (!flyout.appended) {
                this.appendFlyout(flyout);
                flyout.appended = true;
            } else {
                flyout.el.style.display = 'block';
            }
        },

        hideFlyout (flyout) {
            flyout.el.style.display = 'none';
        },

        destroy () {
            const { props } = this;
            props.flyouts.forEach((flyout) => {
                flyout.remove();
            });
        }

    }
});

export default Flyout;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-containers_AppContainer.html">containers/AppContainer</a></li><li><a href="module-containers_CanvasContainer.html">containers/CanvasContainer</a></li><li><a href="module-containers_FormatterContainer.html">containers/FormatterContainer</a></li><li><a href="module-containers_UIContainer.html">containers/UIContainer</a></li><li><a href="module-core_Container.html">core/Container</a></li><li><a href="module-core_Context.html">core/Context</a></li><li><a href="module-core_Mediator.html">core/Mediator</a></li><li><a href="module-modules_ContentEditable.html">modules/ContentEditable</a></li><li><a href="module-modules_Selection.html">modules/Selection</a></li></ul><h3>Classes</h3><ul><li><a href="module-containers_AppContainer-AppContainer.html">AppContainer</a></li><li><a href="module-containers_CanvasContainer-CanvasContainer.html">CanvasContainer</a></li><li><a href="module-containers_FormatterContainer-FormatterContainer.html">FormatterContainer</a></li><li><a href="module-containers_UIContainer-UIContainer.html">UIContainer</a></li><li><a href="module-core_Context-Context.html">Context</a></li><li><a href="module-core_Mediator-Mediator.html">Mediator</a></li><li><a href="module-modules_ContentEditable-ContentEditable.html">ContentEditable</a></li><li><a href="module-modules_Selection-Selection.html">Selection</a></li></ul><h3>Events</h3><ul><li><a href="module-modules_ContentEditable.html#~event:contenteditable:focus">contenteditable:focus</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-core_Mediator-Mediator-requests.html">requests</a></li></ul><h3>Global</h3><ul><li><a href="global.html#BaseFormatter">BaseFormatter</a></li><li><a href="global.html#BlockFormatter">BlockFormatter</a></li><li><a href="global.html#browser">browser</a></li><li><a href="global.html#Canvas">Canvas</a></li><li><a href="global.html#commands">commands</a></li><li><a href="global.html#DOM">DOM</a></li><li><a href="global.html#Flyout">Flyout</a></li><li><a href="global.html#Formatter">Formatter</a></li><li><a href="global.html#formatters">formatters</a></li><li><a href="global.html#func">func</a></li><li><a href="global.html#guid">guid</a></li><li><a href="global.html#keycodes">keycodes</a></li><li><a href="global.html#LinkFormatter">LinkFormatter</a></li><li><a href="global.html#ListFormatter">ListFormatter</a></li><li><a href="global.html#Module">Module</a></li><li><a href="global.html#Mouse">Mouse</a></li><li><a href="global.html#Paste">Paste</a></li><li><a href="global.html#pasteUtils">pasteUtils</a></li><li><a href="global.html#TextFormatter">TextFormatter</a></li><li><a href="global.html#Toolbar">Toolbar</a></li><li><a href="global.html#Typester">Typester</a></li><li><a href="global.html#zeroWidthSpace">zeroWidthSpace</a></li><li><a href="global.html#zeroWidthSpaceEntity">zeroWidthSpaceEntity</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 09 2018 21:24:57 GMT+0200 (SAST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
